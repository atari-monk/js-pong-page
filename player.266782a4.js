var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},e=t.parcelRequire3f2e;null==e&&((e=function(t){if(t in s)return s[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return s[t]=n,e.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,s){i[t]=s},t.parcelRequire3f2e=e),e("3gXC5"),e("ic7rk"),e("9NZOq");class n{constructor(t,s){this.x=t,this.y=s}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){const t=this.mag(),s=new n;return s.x=this.x/t,s.y=this.y/t,s}log(){console.log(`(${this.x}, ${this.y})`)}}class a{#t;constructor(t,s,i,e,a,o,r,h){this.gameSize=t,this.position=s,this.#t=new n(s.x,s.y),this.size=i,this.speed=e,this.inputHandler=a,this.render=o,this.printer=r,this.textPos=h,this.color="green",this.infoColor="white",this.name="entity"}update(t){this.inputHandler.handleInput(this),this.position.y-=t.deltaTime*this.speed.y,this.#s()}reverseXSpeed(){this.speed.x*=-1}reverseYSpeed(){this.speed.y*=-1}#s(){this.position.y<=this.size.y/2&&(this.position.y=this.size.y/2),this.position.y>=this.gameSize.y-this.size.y/2&&(this.position.y=this.gameSize.y-this.size.y/2)}reset(){this.position.x=this.#t.x,this.position.y=this.#t.y,this.speed.x=0,this.speed.y=0}draw(t){this.render.draw(t,this),this.drawInfo()}drawInfo(){const t=this.printer,s=this.getInfo();for(let i=0;i<s.length;i++)t?.print(`${s[i].join("   ")}`,this.textPos.x,this.textPos.y+40*i+40,this.infoColor)}getInfo(){return[[`${this.name} - size (${this.size.x.toFixed(0)}, ${this.size.y.toFixed(0)}), vel (${this.speed.x.toFixed(2)}, ${this.speed.y.toFixed(2)}), pos (${this.position.x.toFixed(0)}, ${this.position.y.toFixed(0)})`]]}}class o extends a{constructor(t,s,i,e,n,a,o,r){super(t,s,i,e,n,a.graphics,o,r)}draw(t){this.renderers.graphics.draw(t,this)}drawText(t){this.renderers.text.draw(t,this)}}class r extends o{constructor(t,s,i,e,n,a,o,r,h){super(t,s,i,e,n,a.graphics,o,r,h),this.name="Ball",this.wallCollision=h,this.renderers=a}update(t){this.inputHandler?.handleInput(this),this.#i(t),this.wallCollision?.calculateCollision(this)}#i(t){this.position.x+=t.deltaTime*this.speed.x,this.position.y+=t.deltaTime*this.speed.y}getInfo(){const t=super.getInfo();return t[0][0]=t[0][0].concat(`, wall (${this.wallCollision.log})`),t}}class h{constructor(t){this.gameFactory=t,this.screen=t.screen,this.timer=this.gameFactory.timer,this.input=this.gameFactory.input,this.ball=this.gameFactory.ball,this.player1=this.gameFactory.player1,this.player2=this.gameFactory.player2,this.collisionLeft=this.gameFactory.collisionLeft,this.collisionLeftRender=this.gameFactory.collisionLeftRender,this.collisionRight=this.gameFactory.collisionRight,this.collisionRightRender=this.gameFactory.collisionRightRender,this.printer=this.gameFactory.printer,this.pointCount=this.gameFactory.pointCount,this.name="Game"}update(t){this.timer.set(t),null!=this.ball&&this.ball.update(this.timer),null!=this.player1&&this.player1.update(this.timer),null!=this.player2&&this.player2.update(this.timer),null!=this.collisionLeft&&null!=this.ball&&null!=this.player1&&this.collisionLeft.calculateCollision(this.player1,this.ball),null!=this.collisionRight&&null!=this.ball&&null!=this.player2&&this.collisionRight.calculateCollision(this.player2,this.ball),this.pointCount?.update()}draw(){this._clearCtx(),null!=this.ball&&this.ball.draw(this.screen.gameCtx),null!=this.player1&&this.player1.draw(this.screen.gameCtx),null!=this.player2&&this.player2.draw(this.screen.gameCtx),null!=this.collisionLeftRender&&this.collisionLeftRender.draw(),null!=this.collisionRightRender&&this.collisionRightRender.draw(),this.collisionLeft?.draw(),this.collisionRight?.draw(),this.pointCount?.draw(),this._drawPoints(this.screen.gameCtx),this.ball instanceof r&&this.ball?.drawText(this.screen.textCtx),this._print()}_clearCtx(){this.screen.gameCtx.clearRect(0,0,this.screen.gameSize.x,this.screen.gameSize.y),this.screen.textCtx.clearRect(0,0,this.screen.textSize.x,this.screen.textSize.y)}_print(){const t=this.printer,s=this.getInfo();for(let i=0;i<s.length;i++)t?.print(`${s[i].join("     ")}`,5,20+40*i,this.infoColor)}getInfo(){return[["test"]]}_drawPoints(t,s=!1){s&&(t.fillStyle="white",t.fillRect(this.screen.gameSize.x/2-.5,this.screen.gameSize.y/2-.5,1,1))}}class l extends h{#e;constructor(t,s=!0){super(t),this.#e=s,this.views=t.views,this.infoCanvas=this.views.get("info"),this.gameCanvas=this.views.get("game"),this.pointsCanvas=this.views.get("points")}draw(){this._clearCtx(),null!=this.ball&&this.ball.draw(this.gameCanvas.ctx),null!=this.player1&&this.player1.draw(this.gameCanvas.ctx),null!=this.player2&&this.player2.draw(this.gameCanvas.ctx),null!=this.collisionLeftRender&&this.collisionLeftRender.draw(),null!=this.collisionRightRender&&this.collisionRightRender.draw(),this.collisionLeft?.draw(),this.collisionRight?.draw(),this.pointCount?.draw(),this._drawPoints(this.gameCanvas.ctx),this.ball instanceof r&&this.ball?.drawText(this.infoCanvas.ctx),this.input?.draw&&this.input?.draw(),this.#e&&this._print()}getInfo(){return[[`${this.name} - game-canvas (${this.gameCanvas.size.x}, ${this.gameCanvas.size.y}), info-canvas (${this.infoCanvas.size.x}, ${this.infoCanvas.size.y}), points-canvas (${this.pointsCanvas.size.x}, ${this.pointsCanvas.size.y})`]]}_clearCtx(){this.gameCanvas.ctx.clearRect(0,0,this.gameCanvas.size.x,this.gameCanvas.size.y),this.infoCanvas.ctx.clearRect(0,0,this.infoCanvas.size.x,this.infoCanvas.size.y),this.pointsCanvas.ctx.clearRect(0,0,this.pointsCanvas.size.x,this.pointsCanvas.size.y)}}class c{#n;#a;#o;#r;constructor(t,s){this.#n=t,this.#a=s}get canvasId(){return this.#n}get size(){return this.#a}get canvas(){return this.#o}get ctx(){return this.#r}setCanvas(){this.#o=document.getElementById(this.#n),this.#o.width=this.#a.x,this.#o.height=this.#a.y,this.#r=this.#o.getContext("2d")}}const d="hide",p="select-controls-player",u="menu-container",g="btn-start",m="btn-reset",y="btn-overlay";class w{constructor(){this.deltaTime=0,this.lastTime=0}set(t){const s=t-this.lastTime;s<20&&(this.deltaTime=s),this.lastTime=t}log(){console.log(this.deltaTime)}}class v{constructor(t){this.ctx=t,this.setPrint("left","normal 12px Arial")}setPrint(t,s){this.ctx.textAlign=t,this.ctx.font=s}print(t,s,i,e){this.ctx.fillStyle=e,this.ctx.fillText(t,s,i)}printInLines(t,s,i,e,n){let a=n;t.forEach((t=>{this.print(t,e,a,s),a+=i}))}}class x extends a{constructor(t,s,i,e,n,a,o,r,h="Player"){super(t,s,i,e,n,a,o,r),this.name=h}}class f{draw(t,s){t.fillStyle="green",t.fillRect(s.position.x-s.size.x/2,s.position.y-s.size.y/2,s.size.x,s.size.y)}}class C{constructor(){this.keys=[],window.addEventListener("keydown",(t=>{"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||-1!==this.keys.indexOf(t.key)||this.keys.push(t.key)})),window.addEventListener("keyup",(t=>{"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||this.keys.splice(this.keys.indexOf(t.key),1)}))}}class b{constructor(t){this.input=t}handleInput(t){this.input.keys.indexOf("ArrowUp")>-1?t.speed.y=1:this.input.keys.indexOf("ArrowDown")>-1?t.speed.y=-1:t.speed.y=0}}class z{constructor(t){this.views=t,this.infoCanvas=t.get("info"),this.gameCanvas=t.get("game"),this.timer=new w,this.printer=new v(this.infoCanvas.ctx),this.input=new C,this.player1=new x(this.gameCanvas.size,new n(this.gameCanvas.size.x/2,this.gameCanvas.size.y/2),new n(40,200),new n(0,0),new b(this.input),new f,this.printer,new n(5,5))}}class R{#h;#l;#c;#d;#p;#u;#e;#g;#m;get coords(){return this.#p}get movingUp(){return this.#h}get movingDown(){return this.#l}get still(){return this.#c}constructor(t,s=!1,i=null){this.#e=s,this.#u=t,document.addEventListener("mousemove",this.#y.bind(this),!1),this.#d=new n,this.#p=new n,this.#h=!1,this.#l=!1,this.#c=!0,this.#m=i}#y(t){clearTimeout(this.#g),this.#p.x=t.screenX,this.#p.y=t.screenY,this.#d.y-this.#p.y>=1?(this.#h=!0,this.#l=!1,this.#c=!1):this.#d.y-this.#p.y<=-1&&(this.#h=!1,this.#l=!0,this.#c=!1),this.#d.y=this.#p.y,this.#g=setTimeout(this.#w.bind(this),0)}#w(){this.#h=!1,this.#l=!1,this.#c=!0}draw(){!1!==this.#e&&this.#v()}#x(){this.#u.setPrint("left","bold 26px Arial")}#v(){this.#u.print(`Mouse: (${this.#p.x}, ${this.#p.y}), (up, down, still) - (${this.#h}, ${this.#l}, ${this.#c})`,this.#m.x,this.#m.y,"white")}#f(){this.#u.setPrint("left","normal 12px Arial")}}class L{constructor(t){this.input=t}handleInput(t){this.input.movingUp?t.speed.y=1:this.input.movingDown?t.speed.y=-1:this.input.still&&(t.speed.y=0)}}class k{constructor(t){this.views=t,this.infoCanvas=t.get("info"),this.gameCanvas=t.get("game"),this.timer=new w,this.printer=new v(this.infoCanvas.ctx),this.input=new R(this.printer,!0,new n(5,70)),this.player1=new x(this.gameCanvas.size,new n(this.gameCanvas.size.x/2,this.gameCanvas.size.y/2),new n(40,200),new n(0,0),new L(this.input),new f,this.printer,new n(5,5))}}let I,S;const $=new class{#C;#b;constructor(){this.#C="laptop",this.#b=new Map,this.#z()}#z(){this.#R("laptop-game",new c("game-canvas",new n(800,600))),this.#R("laptop-info",new c("info-canvas",new n(650,500))),this.#R("laptop-points",new c("points-canvas",new n(800,90))),this.#R("phone-game",new c("game-canvas",new n(300,300))),this.#R("phone-info",new c("info-canvas",new n(500,500))),this.#R("phone-points",new c("points-canvas",new n(300,90))),this.get("game").setCanvas(),this.get("info").setCanvas(),this.get("points").setCanvas()}#R(t,s){this.#b.set(t,s)}get(t){return this.#b.get(`${this.#C}-${t}`)}};new class{#L;#k;#I;#S;#$;#F;#P;static get hide(){return d}static get selectGame(){return"select-controls-game"}static get selectPlayer(){return p}static get menuContainer(){return u}static get btnStart(){return g}static get btnReset(){return m}static get btnOverlay(){return y}constructor(t){this.#P=t,this.#L=document.getElementById(u),this.#k=document.getElementById("menu-btns"),this.#I=document.getElementById(g),this.#S=document.getElementById(m),this.#$=document.getElementById(y),this.#T(),this.#F=document.getElementById("select-controls-container"),console.log(this.#F)}#T(){HTMLSelectElement.prototype.__defineGetter__("val",(function(){return this.options[this.selectedIndex].value})),HTMLSelectElement.prototype.__defineGetter__("text",(function(){return this.options[this.selectedIndex].text}))}setPlayerView(t){this.#P(this.#F.childNodes[3].val),this.#I.classList.add(d),this.#S.classList.add(d),this.#$.classList.add(d),this.#F.classList.add(p),this.#F.classList.remove(d),this.#L.classList.remove(d),this.#_(t)}setGameView(){this.#L.classList.remove(d),this.#k.classList.remove(d),this.#I.classList.remove(d),this.#S.classList.remove(d),this.#$.classList.remove(d)}hide(){this.#I.classList.add(d),this.#S.classList.add(d),this.#$.classList.add(d),this.#F.classList.add(d)}#_(){this.#F.addEventListener("change",(t=>{this.#P(t.target.value)}))}}((function(t){switch(t){case"kyeboard-set1":case"kyeboard-set2":S=new z($);break;case"mouse":S=new k($)}I=new l(S)})).setPlayerView(),function t(s){I.update(s),I.draw(),requestAnimationFrame(t)}(0);
//# sourceMappingURL=player.266782a4.js.map
